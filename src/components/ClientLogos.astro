---
import fs from "node:fs";
import path from "node:path";
import ClientLogosList from "./ClientLogosList";

const clientsDir = path.join(process.cwd(), "public", "clients");
let logos = [];

try {
    if (fs.existsSync(clientsDir)) {
        logos = fs
            .readdirSync(clientsDir)
            .filter((file) => /\.(png|jpg|jpeg|svg|webp)$/i.test(file))
            .map((file) => `/clients/${file}`);
    }
} catch (e) {
    console.error("Error reading clients directory:", e);
}
---

<section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <h2 class="text-3xl font-bold text-gray-900 sm:text-4xl">
                Confían en <span class="text-nodo-purple">Nodo</span>
            </h2>
            <p class="mt-4 text-lg text-gray-600">
                Empresas que han transformado su gestión con nuestra tecnología.
            </p>
        </div>

        <ClientLogosList client:visible logos={logos} />
    </div>
</section>
